<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LABirintar - Formulário Comercial para Escolas</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;700&family=Lora:ital,wght@0,400..700;1,400..700&display=swap" rel="stylesheet">
    
    <!-- Feather Icons for modern icons -->
    <script src="https://unpkg.com/feather-icons"></script>

    <style>
        /* CSS Custom Properties (Variables) */
        :root {
            --color-primary: #ff595a;   /* Coral Red */
            --color-secondary: #ffa400; /* Mustard Yellow */
            --color-light-bg: #ffe9c9;  /* Light Cream */
            --color-accent-lavender: #e6cbe4;
            --color-accent-blue: #aec5e7;
            --color-text: #2c2c2c;
            --color-white: #ffffff;
            --font-title: 'Lora', serif;
            --font-body: 'Inter', sans-serif;
            --shadow-sm: 0 4px 15px rgba(0, 0, 0, 0.05);
            --shadow-md: 0 8px 30px rgba(0, 0, 0, 0.1);
        }

        /* General Body and Reset Styles */
        * { margin: 0; padding: 0; box-sizing: border-box; scroll-behavior: smooth; }
        body { font-family: var(--font-body); background-color: var(--color-white); color: var(--color-text); line-height: 1.8; overflow-x: hidden; }

        /* Layout Container */
        .container { width: 90%; max-width: 1100px; margin: 0 auto; padding: 6rem 0; }

        /* Typography */
        h1, h2, h3, h4 { font-family: var(--font-title); font-weight: 600; line-height: 1.3; }
        h1 { font-size: clamp(2.8rem, 6vw, 4.5rem); color: var(--color-white); text-shadow: 0 2px 10px rgba(0,0,0,0.2); }
        h2 { font-size: clamp(2.2rem, 5vw, 3.2rem); text-align: center; margin-bottom: 1rem; }
        h3 { font-size: clamp(1.5rem, 4vw, 2rem); color: var(--color-primary); margin-bottom: 1rem; }
        h4 { font-size: clamp(1.2rem, 3vw, 1.5rem); margin-bottom: 1rem; }
        p { margin-bottom: 1.5rem; max-width: 650px; }
        .section-subtitle { text-align: center; font-size: 1.1rem; max-width: 700px; margin: 0 auto 4rem auto; color: #555; }

        /* Fade-in Animation on Scroll */
        .fade-in { opacity: 0; transform: translateY(30px); transition: opacity 0.8s ease-out, transform 0.8s ease-out; }
        .fade-in.visible { opacity: 1; transform: translateY(0); }

        /* Header Section */
        .hero { position: relative; height: 100vh; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; padding: 1rem; background: linear-gradient(145deg, var(--color-accent-blue), var(--color-accent-lavender)); overflow: hidden; }
        .hero-logo { width: 140px; margin-bottom: 2rem; filter: drop-shadow(var(--shadow-md)); }
        .hero .subtitle { font-size: 1.3rem; color: var(--color-white); font-weight: 300; letter-spacing: 1px; text-shadow: 0 1px 5px rgba(0,0,0,0.15); }

        /* Section Vision */
        .section-vision { background-color: var(--color-white); text-align: center; }
        .vision-quote { font-family: var(--font-title); font-size: clamp(1.6rem, 4vw, 2.4rem); font-style: italic; color: var(--color-primary); max-width: 800px; margin: 0 auto 2rem auto; }
        .section-vision p { margin-left: auto; margin-right: auto; }
        
        /* Problem Section with Ranking */
        .problem-grid { display: grid; grid-template-columns: 1fr; gap: 3rem; align-items: flex-start; }
        @media (min-width: 992px) { .problem-grid { grid-template-columns: 1fr 1fr; } }
        .challenge-item { display: flex; justify-content: space-between; align-items: center; background-color: var(--color-light-bg); padding: 1rem 1.5rem; border-radius: 12px; margin-bottom: 1rem; }
        .challenge-item p { margin-bottom: 0; font-weight: 500; }
        .challenge-item select { padding: 0.5rem; border-radius: 8px; border: 2px solid var(--color-accent-blue); font-weight: bold; cursor: pointer; }
        .problem-image-wrapper { background-color: var(--color-light-bg); border-radius: 20px; padding: 2rem; text-align: center; box-shadow: var(--shadow-sm); }
        .problem-image-wrapper h4 { font-family: var(--font-body); font-size: 1.2rem; font-style: italic; color: var(--color-text); }
        .textarea-group label { display: block; font-weight: 600; margin-bottom: 0.5rem; }
        .textarea-group textarea { width: 100%; min-height: 120px; padding: 1rem; border-radius: 12px; border: 2px solid var(--color-accent-blue); font-family: var(--font-body); font-size: 1rem; resize: vertical; }

        /* Solution Section */
        .section-solution { background: linear-gradient(145deg, var(--color-accent-lavender), var(--color-white)); padding: 6rem 0; }
        .solution-grid { display: grid; grid-template-columns: 1fr; gap: 2rem; perspective: 1000px; }
        @media (min-width: 768px) { .solution-grid { grid-template-columns: repeat(2, 1fr); } }
        .flip-card { background-color: transparent; height: 320px; border-radius: 20px; }
        .flip-card-inner { position: relative; width: 100%; height: 100%; text-align: center; transition: transform 0.8s; transform-style: preserve-3d; box-shadow: var(--shadow-md); border-radius: 20px; }
        .flip-card:hover .flip-card-inner { transform: rotateY(180deg); }
        .flip-card-front, .flip-card-back { position: absolute; width: 100%; height: 100%; -webkit-backface-visibility: hidden; backface-visibility: hidden; border-radius: 20px; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 2rem; }
        .flip-card-front { background: var(--color-white); color: var(--color-text); }
        .flip-card-front i { color: var(--color-primary); margin-bottom: 1rem; }
        .flip-card-front h4 { font-family: var(--font-title); font-size: 1.6rem; }
        .flip-card-back { background: linear-gradient(145deg, var(--color-primary), var(--color-secondary)); color: var(--color-white); transform: rotateY(180deg); }

        /* Portfolio Section */
        .portfolio-grid { display: grid; grid-template-columns: 1fr; gap: 2.5rem; }
        @media (min-width: 768px) { .portfolio-grid { grid-template-columns: repeat(2, 1fr); } }
        @media (min-width: 1024px) { .portfolio-grid { grid-template-columns: repeat(3, 1fr); } }
        .modality-card { background: var(--color-white); border-radius: 15px; box-shadow: var(--shadow-md); overflow: hidden; }
        .modality-card .carousel { position: relative; width: 100%; height: 200px; }
        .modality-card .carousel-images { display: flex; height: 100%; transition: transform 0.5s ease-in-out; }
        .modality-card .carousel-images img { width: 100%; height: 100%; object-fit: cover; flex-shrink: 0; }
        .carousel-btn { position: absolute; top: 50%; transform: translateY(-50%); background: rgba(255, 255, 255, 0.7); border: none; border-radius: 50%; width: 40px; height: 40px; cursor: pointer; display: flex; align-items: center; justify-content: center; box-shadow: var(--shadow-sm); }
        .carousel-btn.prev { left: 10px; }
        .carousel-btn.next { right: 10px; }
        .modality-card-content { padding: 1.5rem; }
        .modality-card-header { display: flex; justify-content: space-between; align-items: center; }
        .modality-card-header h4 { margin-bottom: 0; }
        .modality-card-header input[type="checkbox"] { width: 20px; height: 20px; accent-color: var(--color-primary); }
        .diagnostic-link-area { text-align: center; margin-top: 4rem; background: var(--color-light-bg); padding: 2rem; border-radius: 15px; }
        .diagnostic-link-area p { max-width: 500px; margin-left: auto; margin-right: auto; }
        
        /* Partnership Section */
        .partnership-grid { display: grid; grid-template-columns: 1fr; gap: 3rem; margin-bottom: 4rem; }
        @media (min-width: 992px) { .partnership-grid { grid-template-columns: 1fr 1fr; } }
        .model-card { background: var(--color-white); padding: 2.5rem; border-radius: 20px; box-shadow: var(--shadow-md); border-top: 5px solid; transition: transform 0.3s, box-shadow 0.3s; }
        .model-card:hover { transform: translateY(-10px); box-shadow: 0 15px 40px rgba(0,0,0,0.12); }
        .model-card.split { border-color: var(--color-primary); }
        .model-card.subscription { border-color: var(--color-secondary); }
        .model-card h4 { font-size: 1.8rem; margin-bottom: 1rem; }
        .model-card .split-details { font-size: 1.2rem; font-weight: 500; margin: 1.5rem 0; padding-left: 1rem; border-left: 3px solid #eee; }
        .model-card .split-details span { font-weight: 700; color: var(--color-primary); }
        .model-card .description { font-style: italic; color: #666; }

        /* Simulator Styles */
        .simulator { background: var(--color-light-bg); padding: 2rem; border-radius: 20px; }
        @media (min-width: 768px) { .simulator { padding: 3rem; } }
        .simulator-header { margin-bottom: 2rem; }
        .simulator-inputs { display: grid; grid-template-columns: 1fr; gap: 1.5rem; margin-bottom: 2rem; }
        @media (min-width: 768px) { .simulator-inputs { grid-template-columns: 1fr 1fr; } }
        
        .input-group { display: flex; flex-direction: column; }
        .input-group label { font-weight: 500; margin-bottom: 0.5rem; }
        .input-group input[type="text"], .input-group input[type="number"] { width: 100%; padding: 0.8rem 1rem; border: 2px solid var(--color-accent-blue); border-radius: 10px; font-family: var(--font-body); font-size: 1rem; }
        .input-group input[readonly] { background-color: #f0f0f0; cursor: not-allowed; }
        .slider-group { display: flex; flex-direction: column; }
        .slider-group .label-container { display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem; }
        .slider-group label { font-weight: 500; margin-bottom: 0; }
        .slider-group .slider-value { font-weight: bold; color: var(--color-primary); padding-left: 1rem; } /* MODIFIED: Added padding for spacing */
        input[type="range"] { -webkit-appearance: none; width: 100%; height: 8px; background: var(--color-accent-blue); border-radius: 5px; outline: none; }
        input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 20px; height: 20px; background: var(--color-primary); cursor: pointer; border-radius: 50%; }
        input[type="range"]::-moz-range-thumb { width: 20px; height: 20px; background: var(--color-primary); cursor: pointer; border-radius: 50%; }
        
        .financial-comparison-row {
            grid-column: 1 / -1; /* Span full width */
            display: flex;
            align-items: flex-end;
            justify-content: space-between;
            gap: 1rem;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid var(--color-accent-blue);
        }
        .financial-comparison-row .input-group { flex: 1; }
        .financial-comparison-row .input-group.percentage { flex: 0.7; text-align: center; }
        .financial-comparison-row .input-group.percentage input { text-align: center; font-weight: bold; color: var(--color-primary); }

        #results { margin-top: 2rem; display: grid; grid-template-columns: 1fr; gap: 1.5rem; text-align: left; }
        @media (min-width: 768px) { #results { grid-template-columns: 1fr 1fr; } }
        .result-card { background: var(--color-white); padding: 1.5rem; border-radius: 15px; box-shadow: var(--shadow-sm); }
        .result-card h4 { font-size: 1.2rem; }
        .result-card .gain-value { font-size: 1.8rem; font-weight: bold; color: var(--color-primary); }
        .result-card .formula { font-size: 0.8rem; font-style: italic; color: #777; }

        /* Benefits Section */
        .benefits-cloud { display: flex; flex-wrap: wrap; justify-content: center; gap: 1rem; }
        .benefit-tag input[type="checkbox"] { display: none; }
        .benefit-tag label { display: inline-block; background-color: var(--color-accent-blue); color: var(--color-text); padding: 0.8rem 1.5rem; border-radius: 50px; font-weight: 500; transition: transform 0.3s, background-color 0.3s; cursor: pointer; }
        .benefit-tag input[type="checkbox"]:checked + label { transform: scale(1.05); background-color: var(--color-secondary); color: var(--color-white); box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        
        /* Footer & Modal */
        footer { background-color: var(--color-text); color: var(--color-white); text-align: center; padding: 5rem 1rem; }
        footer h2 { color: var(--color-white); }
        footer p { max-width: 600px; margin: 0 auto 2.5rem auto; opacity: 0.8; }
        .footer-buttons { display: flex; justify-content: center; gap: 1.5rem; flex-wrap: wrap; }
        .btn { display: inline-block; padding: 1rem 2.5rem; border-radius: 50px; text-decoration: none; font-weight: 700; transition: transform 0.3s, box-shadow 0.3s; border: none; cursor: pointer; font-size: 1rem; }
        .btn:hover { transform: translateY(-5px); box-shadow: var(--shadow-md); }
        .btn-primary { background-color: var(--color-primary); color: var(--color-white); }
        .btn-secondary { background-color: var(--color-secondary); color: var(--color-white); }
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.6); backdrop-filter: blur(5px); display: flex; align-items: center; justify-content: center; opacity: 0; visibility: hidden; transition: all 0.4s ease; z-index: 1000; }
        .modal-overlay.visible { opacity: 1; visibility: visible; }
        .modal-content { background: var(--color-white); padding: 2.5rem; border-radius: 20px; width: 90%; max-width: 500px; box-shadow: var(--shadow-md); transform: scale(0.9); transition: all 0.4s ease; }
        .modal-overlay.visible .modal-content { transform: scale(1); }
        .modal-content .input-group { width: 100%; margin-bottom: 1rem; }
        .modal-content .input-group input { width: 100%; }

    </style>
</head>
<body>

    <header class="hero">
        <img src="../logoslabirintar/Labirintar_RGB.png" alt="Logo LABirintar" class="hero-logo fade-in">
        <h1 class="fade-in">Educar é ocupar o tempo com sentido.</h1>
        <p class="subtitle fade-in">E sentido se constrói em rede.</p>
    </header>

    <form id="commercial-form">
        <main>
            <section class="section-vision container fade-in">
                <p class="vision-quote">“A escola em tempo integral precisa mais do que tempo: ela precisa de experiência com sentido.”</p>
                <p>Apresentamos a <strong>LABirintar</strong>: um ecossistema que conecta escolas, educadores e famílias por meio de uma plataforma viva, sensível e inteligente de gestão do contraturno. Este é um convite a caminhar conosco.</p>
            </section>

            <section class="section-problem container fade-in">
                <h2>A Cartografia do Desafio</h2>
                <div class="problem-grid">
                    <div class="challenges-ranking">
                        <p class="section-subtitle" style="text-align: left; margin: 0 0 2rem 0;">Classifique os desafios abaixo em ordem de importância para sua instituição (1 = mais importante).</p>
                        <div class="challenge-item">
                            <p>Diferenciar-se sem onerar a operação</p>
                            <select name="ranking_diferenciar" class="ranking-select" required><option value="">Prioridade</option><option value="1">1</option><option value="2">2</option><option value="3">3</option></select>
                        </div>
                        <div class="challenge-item">
                            <p>Atrair e reter alunos com propostas significativas</p>
                            <select name="ranking_reter" class="ranking-select" required><option value="">Prioridade</option><option value="1">1</option><option value="2">2</option><option value="3">3</option></select>
                        </div>
                        <div class="challenge-item">
                            <p>Transformar espaços ociosos em ambientes vivos</p>
                            <select name="ranking_espacos" class="ranking-select" required><option value="">Prioridade</option><option value="1">1</option><option value="2">2</option><option value="3">3</option></select>
                        </div>
                    </div>
                    <div class="problem-image-wrapper">
                        <i data-feather="map" style="width: 80px; height: 80px; color: var(--color-secondary); stroke-width: 1.5;"></i>
                        <div class="textarea-group">
                            <label for="open-challenge">Quais são os maiores desafios do seu contraturno hoje?</label>
                            <textarea id="open-challenge" name="desafio_aberto" placeholder="Descreva aqui..."></textarea>
                        </div>
                    </div>
                </div>
            </section>

            <section class="section-solution fade-in">
                <div class="container" style="padding-top: 0; padding-bottom: 0;">
                    <h2>Nossa Solução: Um Ecossistema Integrado</h2>
                    <p class="section-subtitle">Conectamos quatro pilares para criar uma experiência de contraturno única, viva e pulsante.</p>
                    <div class="solution-grid">
                        <div class="flip-card"><div class="flip-card-inner"><div class="flip-card-front"><i data-feather="cpu" style="width: 48px; height: 48px;"></i><h4>Tecnologia</h4></div><div class="flip-card-back"><h4>Gestão Inteligente</h4><p>Sistema automatizado que simplifica a gestão, comunicação e pagamentos.</p></div></div></div>
                        <div class="flip-card"><div class="flip-card-inner"><div class="flip-card-front"><i data-feather="award" style="width: 48px; height: 48px;"></i><h4>Rede de Educadores</h4></div><div class="flip-card-back"><h4>Excelência Curada</h4><p>Acesso a uma rede de educadores com formação contínua, garantindo oficinas de alta qualidade.</p></div></div></div>
                        <div class="flip-card"><div class="flip-card-inner"><div class="flip-card-front"><i data-feather="heart" style="width: 48px; height: 48px;"></i><h4>Curadoria Pedagógica</h4></div><div class="flip-card-back"><h4>Experiências Vivas</h4><p>Desenvolvemos jornadas de aprendizagem integrais e afetivas que despertam a paixão dos alunos.</p></div></div></div>
                        <div class="flip-card"><div class="flip-card-inner"><div class="flip-card-front"><i data-feather="share-2" style="width: 48px; height: 48px;"></i><h4>Comunidade em Rede</h4></div><div class="flip-card-back"><h4>Aprendizagem Conectada</h4><p>Unimos escolas, famílias e educadores, fortalecendo laços e criando uma comunidade de apoio.</p></div></div></div>
                    </div>
                </div>
            </section>

            <section class="section-portfolio container fade-in">
                <h2>Portfólio de Modalidades</h2>
                <p class="section-subtitle">(em levantamento com os parceiros)</p>
                <div id="portfolio-grid" class="portfolio-grid">
                    <!-- Portfolio cards will be injected here by JavaScript -->
                </div>
                <div class="diagnostic-link-area">
                    <h4>Não tem certeza de quais modalidades escolher?</h4>
                    <p>Use nosso formulário de diagnóstico para pesquisar os interesses dos alunos e famílias. Copie o link e compartilhe com sua equipe pedagógica.</p>
                    <button type="button" id="copy-diagnostic-link" class="btn btn-primary">Copiar Link do Diagnóstico</button>
                </div>
            </section>
            
            <section class="section-partnership container fade-in">
                <h2>Modelos de Parceria Flexíveis</h2>
                <p class="section-subtitle">Temos o modelo ideal para o momento e a estratégia da sua escola.</p>
                <div class="partnership-grid">
                    <div class="model-card split"><h4>Modelo 1: Split de Receita</h4><p>Perfeito para escolas que desejam <strong>inovar sem investimento inicial</strong>.</p><div class="split-details"><p><span>50%</span> LABirintar</p><p><span>35%</span> Educador</p><p><strong><span>15%</span> Escola</strong></p></div><p class="description">A escola oferece o espaço e a LABirintar cuida de toda a operação.</p></div>
                    <div class="model-card subscription"><h4>Modelo 2: Assinatura Mensal</h4><p>Para escolas que buscam ser <strong>protagonistas e maximizar o retorno</strong>.</p><div class="split-details"><p><strong><span>50%</span> Escola</strong></p><p><span>35%</span> Educador</p><p><span>15%</span> LABirintar</p></div><p class="description">A escola se torna o motor comercial e fica com a maior parte da receita.</p></div>
                </div>
                
                <div class="simulator fade-in">
                    <div class="simulator-header">
                        <!-- MODIFIED: Title updated -->
                        <h3><i data-feather="bar-chart-2" style="vertical-align: -4px; margin-right: 8px;"></i>Simule o seu Potencial de Ganho</h3>
                    </div>
                    <!-- MODIFIED: Restored previous layout -->
                    <div class="simulator-inputs">
                        <div class="input-group">
                            <label for="totalAlunos">Total de alunos da escola</label>
                            <input type="number" id="totalAlunos" placeholder="Ex: 500">
                        </div>
                        <div class="slider-group">
                            <div class="label-container">
                                <label for="metaConversao">Meta de conversão para o extra</label>
                                <span id="metaConversaoValue" class="slider-value">10%</span>
                            </div>
                            <input type="range" id="metaConversao" min="0" max="100" value="10">
                        </div>
                        <div class="input-group">
                            <label for="alunosExtra">Alunos no extracurricular (calculado)</label>
                            <input type="text" id="alunosExtra" readonly>
                        </div>
                        <div class="slider-group">
                             <div class="label-container">
                                <label for="frequenciaSemanal">Frequência semanal média</label>
                                <span id="frequenciaSemanalValue" class="slider-value">2x / semana</span>
                            </div>
                            <input type="range" id="frequenciaSemanal" min="1" max="5" value="2">
                        </div>
                        
                        <div class="financial-comparison-row">
                            <div class="input-group">
                                <label for="mensalidadeCurricular">Mensalidade do curricular (R$)</label>
                                <input type="number" id="mensalidadeCurricular" placeholder="Ex: 1500">
                            </div>
                            <div class="input-group percentage">
                                <label for="percentualCurricular">% sobre curricular</label>
                                <input type="text" id="percentualCurricular" readonly>
                            </div>
                            <div class="input-group">
                                <label for="mensalidadeExtra">Mensalidade do extra (sugestão R$)</label>
                                <input type="text" id="mensalidadeExtra" readonly>
                            </div>
                        </div>
                    </div>
                    <div style="text-align: center; margin-top: 1.5rem;">
                        <button id="calculateBtn" type="button" class="btn btn-primary">Calcular Potencial de Receita</button>
                    </div>
                    <div id="results"></div>
                </div>
            </section>

            <section class="section-benefits container fade-in">
                <h2>Quais destes benefícios mais importam para sua escola?</h2>
                <p class="section-subtitle">Selecione as opções que representam maior valor para sua instituição.</p>
                <div class="benefits-cloud">
                    <div class="benefit-tag"><input type="checkbox" id="b1" name="beneficios" value="Novas receitas"><label for="b1">Novas receitas recorrentes</label></div>
                    <div class="benefit-tag"><input type="checkbox" id="b2" name="beneficios" value="Ocupação de espaços"><label for="b2">Ocupação inteligente de espaços</label></div>
                    <div class="benefit-tag"><input type="checkbox" id="b3" name="beneficios" value="Aumento de matrículas"><label for="b3">Aumento de matrículas e retenção</label></div>
                    <div class="benefit-tag"><input type="checkbox" id="b4" name="beneficios" value="Educação Integral"><label for="b4">Alinhamento com a Educação Integral</label></div>
                    <div class="benefit-tag"><input type="checkbox" id="b5" name="beneficios" value="Simplificação da gestão"><label for="b5">Simplificação da gestão do contraturno</label></div>
                    <div class="benefit-tag"><input type="checkbox" id="b6" name="beneficios" value="Reputação de inovação"><label for="b6">Fortalecimento da reputação de inovação</label></div>
                    <div class="benefit-tag"><input type="checkbox" id="b7" name="beneficios" value="Engajamento das famílias"><label for="b7">Engajamento das famílias</label></div>
                </div>
            </section>
        </main>
    </form>
    
    <footer>
        <div class="container">
            <h2>Escolha Caminhar Conosco</h2>
            <p>A LABirintar transforma o contraturno. Preencha seus dados e nossa equipe entrará em contato para construir o futuro da educação juntos.</p>
            <div class="footer-buttons">
                <button type="button" id="open-modal-btn" class="btn btn-secondary">Receber Contato</button>
            </div>
        </div>
    </footer>

    <div id="contact-modal" class="modal-overlay">
        <div class="modal-content">
            <h3>Informações de Contato</h3>
            <p>Deixe seus dados para que nossa equipe possa retornar.</p>
            <div class="input-group"><label for="contact-name">Seu nome</label><input type="text" id="contact-name" name="contato_nome" required></div>
            <div class="input-group"><label for="contact-phone">Telefone</label><input type="tel" id="contact-phone" name="contato_telefone" placeholder="(11) 99999-9999" required></div>
            <div class="input-group"><label for="contact-role">Cargo</label><input type="text" id="contact-role" name="contato_cargo" required></div>
            <div class="input-group"><label for="contact-school">Escola</label><input type="text" id="contact-school" name="contato_escola" required></div>
            <button type="submit" form="commercial-form" class="btn btn-primary" style="width: 100%; margin-top: 1rem;">Enviar</button>
        </div>
    </div>

    <script>
        // Activate Feather Icons
        feather.replace();

        document.addEventListener('DOMContentLoaded', () => {
            // --- Portfolio Data & Generation ---
            const portfolioData = [
                { title: 'Brincar Livre', images: ['1801', '1804', '1811', '1816'] },
                { title: 'Luz e Sombra', images: ['1802', '1806', '1817'] },
                { title: 'Cerâmica', images: ['1803'] },
                { title: 'Programação de Jogos', images: ['1805', '1807', '1808'] },
                { title: 'Marcenaria', images: ['1809', '1810'] },
                { title: 'Mindfulness', images: ['1812'] },
                { title: 'Circo', images: ['1813'] },
                { title: 'Culinária', images: ['1814'] },
                { title: 'Música', images: ['1815', '1818', '1819'] },
                { title: 'Pintura', images: ['1820'] },
                { title: 'Esportes', images: ['1821'] },
                { title: 'Horta', images: ['1822'] },
            ];
            const portfolioGrid = document.getElementById('portfolio-grid');
            portfolioData.forEach((item, index) => {
                const card = document.createElement('div');
                card.className = 'modality-card';
                const carouselId = `carousel-${index}`;
                const imagePath = '../diagnostico/';
                let imageHtml = item.images.map(img => `<img src="${imagePath}IMG_${img}.jpeg" alt="${item.title}">`).join('');
                let buttonsHtml = item.images.length > 1 ? `<button type="button" class="carousel-btn prev" data-carousel="${carouselId}" data-dir="-1"><i data-feather="chevron-left"></i></button><button type="button" class="carousel-btn next" data-carousel="${carouselId}" data-dir="1"><i data-feather="chevron-right"></i></button>` : '';
                card.innerHTML = `<div class="carousel" id="${carouselId}"><div class="carousel-images">${imageHtml}</div>${buttonsHtml}</div><div class="modality-card-content"><div class="modality-card-header"><h4>${item.title}</h4><input type="checkbox" name="modalidades_selecionadas" value="${item.title}"></div></div>`;
                portfolioGrid.appendChild(card);
            });
            feather.replace();

            // --- Carousel Logic ---
            const carousels = {};
            document.querySelectorAll('.carousel').forEach(c => { carousels[c.id] = { index: 0, total: c.querySelectorAll('img').length }; });
            document.querySelectorAll('.carousel-btn').forEach(button => {
                button.addEventListener('click', () => {
                    const carouselId = button.dataset.carousel;
                    const dir = parseInt(button.dataset.dir);
                    const state = carousels[carouselId];
                    const container = document.querySelector(`#${carouselId} .carousel-images`);
                    state.index = (state.index + dir + state.total) % state.total;
                    container.style.transform = `translateX(-${state.index * 100}%)`;
                });
            });

            // --- Exclusive Ranking Logic ---
            const rankingSelects = document.querySelectorAll('.ranking-select');
            function updateRankingOptions() {
                const selectedValues = Array.from(rankingSelects).map(s => s.value).filter(v => v !== "");
                rankingSelects.forEach(select => {
                    Array.from(select.options).forEach(option => {
                        if (option.value !== "" && option.value !== select.value) { option.disabled = selectedValues.includes(option.value); }
                    });
                });
            }
            rankingSelects.forEach(select => select.addEventListener('change', updateRankingOptions));
            updateRankingOptions();

            // --- Copy Diagnostic Link ---
            const copyBtn = document.getElementById('copy-diagnostic-link');
            copyBtn.addEventListener('click', () => {
                const link = 'https://clubesa.github.io/simuladorRede3d/diagnostico/formulario.html';
                navigator.clipboard.writeText(link).then(() => {
                    copyBtn.textContent = 'Link Copiado!';
                    setTimeout(() => { copyBtn.textContent = 'Copiar Link do Diagnóstico'; }, 2000);
                }).catch(err => console.error('Failed to copy: ', err));
            });

            // --- Animations ---
            const fadeInElements = document.querySelectorAll('.fade-in');
            const observer = new IntersectionObserver(entries => {
                entries.forEach(entry => { if (entry.isIntersecting) { entry.target.classList.add('visible'); observer.unobserve(entry.target); } });
            }, { threshold: 0.1 });
            fadeInElements.forEach(el => observer.observe(el));

            // --- Simulator Logic ---
            const totalAlunosInput = document.getElementById('totalAlunos');
            const mensalidadeCurricularInput = document.getElementById('mensalidadeCurricular');
            const metaConversaoSlider = document.getElementById('metaConversao');
            const metaConversaoValue = document.getElementById('metaConversaoValue');
            const alunosExtraInput = document.getElementById('alunosExtra');
            const frequenciaSemanalSlider = document.getElementById('frequenciaSemanal');
            const frequenciaSemanalValue = document.getElementById('frequenciaSemanalValue');
            const mensalidadeExtraInput = document.getElementById('mensalidadeExtra');
            const percentualCurricularInput = document.getElementById('percentualCurricular');
            const calculateBtn = document.getElementById('calculateBtn');
            const resultsDiv = document.getElementById('results');

            const ticketPrices = { 1: 279, 2: 446, 3: 754, 4: 948, 5: 948 };

            function updateSimulatorFields() {
                const totalAlunos = parseInt(totalAlunosInput.value) || 0;
                const meta = metaConversaoSlider.value;
                metaConversaoValue.textContent = `${meta}%`;
                alunosExtraInput.value = Math.round((totalAlunos * meta) / 100);

                const frequencia = frequenciaSemanalSlider.value;
                frequenciaSemanalValue.textContent = `${frequencia}x / semana`;
                const mensalidadeExtra = ticketPrices[frequencia];
                mensalidadeExtraInput.value = mensalidadeExtra;

                const mensalidadeCurricular = parseFloat(mensalidadeCurricularInput.value) || 0;
                if (mensalidadeCurricular > 0) {
                    const percentual = (mensalidadeExtra / mensalidadeCurricular) * 100;
                    percentualCurricularInput.value = `${percentual.toFixed(1)}%`;
                } else {
                    percentualCurricularInput.value = '-';
                }
            }
            
            const simulatorInputs = [totalAlunosInput, mensalidadeCurricularInput, metaConversaoSlider, frequenciaSemanalSlider];
            simulatorInputs.forEach(input => input.addEventListener('input', updateSimulatorFields));

            calculateBtn.addEventListener('click', () => {
                const alunosExtra = parseInt(alunosExtraInput.value) || 0;
                const mensalidadeExtraVal = parseFloat(mensalidadeExtraInput.value) || 0;
                
                if (alunosExtra <= 0) {
                    resultsDiv.innerHTML = `<p style="text-align: center; color: var(--color-primary);">Por favor, insira um número de alunos válido e uma meta de conversão maior que zero.</p>`;
                    return;
                }

                const totalRevenue = alunosExtra * mensalidadeExtraVal;
                const gainModel1 = totalRevenue * 0.15;
                const gainModel2 = (totalRevenue * 0.50) - 2000;
                
                const formatCurrency = (value) => value.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });

                resultsDiv.innerHTML = `
                    <div class="result-card">
                        <h4>Ganho com Modelo 1 (Split)</h4>
                        <p class="gain-value">${formatCurrency(gainModel1)}</p>
                        <p class="formula">15% da receita total de ${formatCurrency(totalRevenue)}</p>
                    </div>
                    <div class="result-card">
                        <h4>Ganho com Modelo 2 (Assinatura)</h4>
                        <p class="gain-value">${formatCurrency(gainModel2)}</p>
                        <p class="formula">50% da receita (${formatCurrency(totalRevenue * 0.5)}) - R$ 2.000 da assinatura</p>
                    </div>`;
            });

            updateSimulatorFields();

            // --- Modal Logic ---
            const modal = document.getElementById('contact-modal');
            document.getElementById('open-modal-btn').addEventListener('click', () => modal.classList.add('visible'));
            modal.addEventListener('click', (e) => { if (e.target === modal) { modal.classList.remove('visible'); } });

            // --- Form Submission Logic ---
            const form = document.getElementById('commercial-form');
            form.addEventListener('submit', (e) => {
                e.preventDefault();
                const formData = new FormData(form);
                const data = {};
                for (let [key, value] of formData.entries()) {
                     if (key === 'beneficios' || key === 'modalidades_selecionadas') {
                        if (!data[key]) data[key] = [];
                        data[key].push(value);
                    } else {
                        data[key] = value;
                    }
                }
                
                data.simulador_total_alunos = totalAlunosInput.value;
                data.simulador_meta_conversao = metaConversaoSlider.value;
                data.simulador_frequencia_semanal = frequenciaSemanalSlider.value;
                data.simulador_mensalidade_curricular = mensalidadeCurricularInput.value;
                
                data.contato_nome = document.getElementById('contact-name').value;
                data.contato_telefone = document.getElementById('contact-phone').value;
                data.contato_cargo = document.getElementById('contact-role').value;
                data.contato_escola = document.getElementById('contact-school').value;

                console.log("Form data collected:", data);
                alert("Obrigado! Suas respostas foram enviadas com sucesso. (Demonstração)");
                modal.classList.remove('visible');
                form.reset();
                updateRankingOptions();
                updateSimulatorFields();
            });
        });
    </script>
</body>
</html>
